<!doctype html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>게시판 접속시 리스트</title>

</head>
<th:block layout:fragment="content">
<style>
    #searchBox{
        margin: 30px;
    }
    .searchBar{
        height: 40px;
        border-radius: 10px;
    }
    .seachAria{
        width: 300px;
    }
    #write_btn{
        float: right;
    }

</style>
<body>
        <div class="container">
            <div id="main">
            <div id="content">
                <div class="d-flex justify-content-center">
                <form action="/" method="get" id="searchBox">
                    <select th:name="type" th:value="${type}" class="searchBar">
                        <option value='A' th:selected="${type}=='A'">전체</option>
                        <option value='T' th:selected="${type}=='T'">제목</option>
                        <option value='W' th:selected="${type}=='W'">작성자</option>
                        <option value='C' th:selected="${type}=='C'">내용</option>
                        <option value='TC' th:selected="${type}=='TC'">제목+내용</option>
                    </select>
                    <input type="text" th:name="search" th:value="${search}" class="searchBar seachAria" placeholder="검색할 내용을 입력해 주세요">
                    <input type="submit" value="검색" id="sBtn" class="searchBar">
                </form>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-hover">
            <thead class="table-primary">
            <tr>
                <th>번호</th>
                <th>제목</th>
                <th>작성자</th>
                <th>작성일</th>
                <th>조회 수</th>
                <th>삭제 여부</th>

            </tr>
    </thead>
            <tbody>
                <tr th:each="board : ${myBoardList}">

                    <td th:text="${board.id}"></td>
                    <th:block th:if="${board.id} == ${board.groupBno}">
                    <td><a th:href="@{/boardContent(id=${board.id},page=${ph.page},type=${type},search=${search})}"th:text="${board.title}"/></td>
                    </th:block>
                    <th:block th:unless="${board.id} == ${board.groupBno}">
                        <td><a th:href="@{/answerContent(id=${board.id},page=${ph.page},type=${type},search=${search})}"th:text="${board.title}"/></td>
                    </th:block>

                    <td th:text="${board.modifiedBy}"></td>
                    <td th:text="${#temporals.format(board.modifiedDate,'yyyy-MM-dd HH:mm')}"></td>
                    <td th:text="${board.viewCount}"></td>
                    <td th:text="${board.delYn}"></td>
                </tr>
            </tbody>


        </table>
            </div>
            <div id="btnBox">
                <button type="button" id="write_btn" class="btn btn-outline-primary" onclick="location.href='writeForm'">글 작성</button>
            </div>

        </div>

        <div>
        <nav aria-label="Page navigation example">
            <ul id="dyn_ul" class="pagination" style="justify-content: center">
            <!--prev -->
            <th:block th:if ="${ph.showPrev}">
                <li class="page-item"><a class="page-link" th:href ="@{/(page=${ph.beginPage}-1,type=${type},search=${search})}"><</a></li>
            </th:block>

            <!--         페이징        -->
            <th:block th:with="ph = ${ph}">
                <th:block th:each="num : ${#numbers.sequence(ph.beginPage,ph.endPage)}">
                    <li class="page-item" th:classappend="${ph.page==num}?'active':''">
                        <a class="page-link" th:href="@{/(page=${num},type=${type},search=${search})}"th:text="${num}" ></a>
                    </li>
                </th:block>
            </th:block>

            <!--next-->
            <th:block th:if ="${ph.showNext}">
                <li class="page-item"><a class="page-link" th:href ="@{/(page=${ph.endPage}+1,type=${type},search=${search})}">></a></li>
            </th:block>
            </ul>
        </nav>
        </div>
    </div>
</div>

<script th:inline="javascript">
    let myBoardList =[[${myBoardList}]]
    console.log(myBoardList)
</script>
</body>
</th:block>
</html>