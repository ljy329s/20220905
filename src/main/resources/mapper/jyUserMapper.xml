<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.adnstyle.myboard.model.repository.JyUserRepository">

    <insert id="insertNewUser" parameterType="jyUser">
        insert into jy_user(user_id, user_pw, user_name, user_phone, user_email, user_birth, role, reg_date)
        values (#{userId}, #{userPw}, #{userName}, #{userPhone}, #{userEmail}, #{userBirth}, #{role}, NOW())
    </insert>

    <select id="checkId" parameterType="string" resultType="int">
        select count(*)
        from jy_user
        where user_id = #{userId}
    </select>

    <select id="checkEmail" parameterType="string" resultType="int">
        select count(*)
        from jy_user
        where user_email = #{userEmail}
    </select>

    <select id="selectUser" parameterType="string" resultType="jyUser">
        select *
        from jy_user
        where user_id = #{userId}
          and del_yn = 'N'
    </select>

<!--    소셜로그인시 회원등록-->
    <insert id="insertNewScUser" parameterType="jyUser">
        insert into jy_user(user_id, user_pw,user_name, user_email , role, reg_date)
        values (#{userId}, #{userPw},#{userName},#{userEmail}, #{role}, NOW())
    </insert>

<!--    소셜 로그인-->
    <select id="selectScUser" resultType="jyUser">
        select user_id, user_name, user_pw, user_email, role, reg_date, provider,provider_id
        from jy_user
        where user_id = #{userId}
    </select>

<!--    아이디 찾기-->
    <select id="findId" resultType="string" parameterType="map">
        select user_id
        from jy_user
        where user_name = #{userName}
        and user_email = #{userEmail}
    </select>

</mapper>